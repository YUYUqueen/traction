---
import Layout from '../layouts/Layout.astro';
import PlaybookGenerator from '../components/PlaybookGenerator';
import AuthButton from '../components/AuthButton';
import { getSession } from 'auth-astro/server';

const session = await getSession(Astro.request);
const user = session?.user;
---

<Layout title="Generate Your Playbook â€” Traction">
  <!-- Nav -->
  <nav class="fixed top-0 w-full bg-stone-50/80 backdrop-blur-sm border-b border-stone-200 z-50">
    <div class="max-w-5xl mx-auto px-6 h-14 flex items-center justify-between">
      <a href="/" class="font-semibold text-stone-900 tracking-tight">Traction</a>
      <div class="flex items-center gap-4">
        <a href="/" class="text-sm text-stone-500 hover:text-stone-700 transition-colors">Home</a>
        <AuthButton user={user} client:load />
      </div>
    </div>
  </nav>

  <main class="pt-24 pb-16 px-6">
    <div class="max-w-4xl mx-auto">
      {/* Free tier: 1 playbook without login. Login needed for more. */}
      <PlaybookGenerator client:load />
    </div>
  </main>

  <footer class="py-8 px-6 border-t border-stone-200">
    <div class="max-w-5xl mx-auto flex items-center justify-between text-sm text-stone-400">
      <span>Built by <a href="https://yuyuqueen.com" class="text-stone-500 hover:text-stone-700 transition-colors">yuyuqueen</a></span>
      <span>&copy; 2026</span>
    </div>
  </footer>
</Layout>
